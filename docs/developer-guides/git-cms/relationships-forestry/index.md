This app works best with JavaScript enabled.

<a href="https://www.stackbit.com/" class="site-header-logo-wrapper"><img src="https://www.stackbit.com/images/logo_alt.svg" alt="Stackbit logo" class="site-header-logo" width="187" height="29" /></a><span class="site-header-logo-sep"></span><a href="/docs/" class="site-header-logo-link">Docs</a>

<span class="screen-reader-text">Show Menu</span><span class="site-header-nav-icon" aria-hidden="true"></span>

-   <a href="https://www.stackbit.com/docs/" class="site-header-menu-item-link">Documentation</a>
-   <a href="https://www.stackbit.com/blog/" class="site-header-menu-item-link">Blog</a>
-   <a href="https://www.stackbit.com/pricing/" class="site-header-menu-item-link">Pricing</a>
-   <a href="https://app.stackbit.com/" class="site-header-menu-item-link">Sign In</a>
-   <a href="https://app.stackbit.com/create" class="button-component button-component-theme-accent"><span>Get Started</span></a>

Navigate Docs<span class="icon-angle-right" aria-hidden="true"></span>

-   [Stackbit Docs](/docs/)
    <span class="screen-reader-text">Submenu</span><span class="search-shortcut">⌘K</span>
-   [Getting Started](/docs/getting-started/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [Create a New Site](/docs/getting-started/create-site/)
    -   [Connect Services](/docs/getting-started/connect-services/)
    -   [Live & Shareable Previews](/docs/getting-started/live-previews/)
    -   [GitHub Sync](/docs/getting-started/content-sync/)
    -   [Local Development](/docs/getting-started/edit-code/)
    -   [Drag-and-Drop Components](/docs/getting-started/drag-and-drop/)
    -   [Content Modeling](/docs/getting-started/content-modeling/)
    -   [Publish to Production](/docs/getting-started/production/)
    -   [Continue Your Journey](/docs/getting-started/next-steps/)

-   [Studio Guides](/docs/studio-guides/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [Editing Content](/docs/studio-guides/editing-content/)
    -   [Adding Pages](/docs/studio-guides/adding-pages/)
    -   [Managing SEO](/docs/studio-guides/managing-seo/)
    -   [Publishing](/docs/studio-guides/publishing/)
    -   [Modeling Content](/docs/studio-guides/modeling-content/)
    -   [Sharing and Collaborators](/docs/studio-guides/sharing/)
    -   [Project Settings](/docs/studio-guides/settings/)
    -   [Debugging and Logs](/docs/studio-guides/logs/)

-   [Developer Guides](/docs/developer-guides/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [The Basics](/docs/developer-guides/basics/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Local Development](/docs/developer-guides/basics/local-development/)
        -   [Deploy Your Site](/docs/developer-guides/basics/deploy/)
        -   [Adding a Custom Domain](/docs/developer-guides/basics/custom-domain/)
        -   [Import an Existing Site into Stackbit](/docs/developer-guides/basics/import-your-site/)

    -   [Integrations](/docs/developer-guides/integrations/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Azure](/docs/developer-guides/integrations/azure/)
        -   [DigitalOcean](/docs/developer-guides/integrations/digital-ocean/)
        -   [Netlify](/docs/developer-guides/integrations/netlify/)

    -   [Content Modeling](/docs/developer-guides/content-modeling/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Building Sites with Components](/docs/developer-guides/content-modeling/building-with-components/)
        -   [Tailwind Components](/docs/developer-guides/content-modeling/adding-tailwind-components/)
        -   [Sectioning a Theme](/docs/developer-guides/content-modeling/adding-sections-existing-theme/)

    -   [API-Based CMS](/docs/developer-guides/api-cms/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Ensure Validation on the CMS Side](/docs/developer-guides/api-cms/validation/)
        -   [Code Defensively](/docs/developer-guides/api-cms/code-defensively/)
        -   [Leverage the Existing Ecosystem](/docs/developer-guides/api-cms/leverage-ecosystem/)

    -   [Git-Based CMS](/docs/developer-guides/git-cms/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Understanding Content Relationships](/docs/developer-guides/git-cms/why-relationships-git/)
        -   [Relationships in Netlify CMS](/docs/developer-guides/git-cms/relationships-netlify-cms/)
        -   [Relationships in Forestry](/docs/developer-guides/git-cms/relationships-forestry/)

    -   [Gatsby](/docs/developer-guides/gatsby/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Adding a Favicon](/docs/developer-guides/gatsby/favicon/)
        -   [Adding Analytics](/docs/developer-guides/gatsby/analytics/)
        -   [Adding a Sitemap](/docs/developer-guides/gatsby/sitemap/)
        -   [Adding Site Search](/docs/developer-guides/gatsby/site-search/)

-   [Reference](/docs/reference/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [stackbit.yaml](/docs/reference/stackbit-yaml/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Properties](/docs/reference/stackbit-yaml/properties/)
        -   [Import](/docs/reference/stackbit-yaml/import/)
        -   [Assets](/docs/reference/stackbit-yaml/assets/)
        -   [Logic Fields](/docs/reference/stackbit-yaml/logic-fields/)
        -   [Models](/docs/reference/stackbit-yaml/models/)
        -   [Page models](/docs/reference/stackbit-yaml/page-models/)
        -   [Data models](/docs/reference/stackbit-yaml/data-models/)
        -   [Object models](/docs/reference/stackbit-yaml/object-models/)
        -   [Model Fields](/docs/reference/stackbit-yaml/fields/)
        -   [Examples](/docs/reference/stackbit-yaml/examples/)

    -   [Stackbit CLI](/docs/reference/stackbit-cli/)
    -   [Create Button](/docs/reference/create-button/)
    -   [Example Projects](/docs/reference/examples/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Simple Next.js Example](/docs/reference/examples/simple-nextjs/)

-   [Conceptual Guides](/docs/conceptual-guides/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [How Stackbit Works](/docs/conceptual-guides/how-stackbit-works/)
    -   [Site Preview](/docs/conceptual-guides/site-preview/)
    -   [Content Model](/docs/conceptual-guides/content-model/)
    -   [API-based vs. Git-based CMS](/docs/conceptual-guides/api-versus-git-based-cms/)
    -   [File-Based CMS](/docs/conceptual-guides/file-based-cms/)
    -   [API-based CMS](/docs/conceptual-guides/api-based-cms/)
    -   [Site Creation](/docs/conceptual-guides/site-creation/)
    -   [Separating Content from Presentation](/docs/conceptual-guides/content-presentation-separation/)
    -   [Content Slug Best Practices](/docs/conceptual-guides/best-practices-slug/)

![Stackbit](/docs/images/stackbit-crane-sm.png)

Managing Content Relationships in the Forestry CMS
==================================================

[Forestry](https://forestry.io/) is another popular, commercial git-based CMS option. The basic setup of Forestry is simple. When you import a project, Forestry will automatically look at the content and map out the data models in its system for you, placing all of these settings in a `.forestry` directory in your project. Below is the default editing for a basic post that has a one-to-one relationship to an author and a one-to-many relationship to related posts.

![default editing in Forestry](/docs/images/forestry-defaults-sm.png)

While Forestry is extremely smart in recognizing fields, it isn't able automatically see that the `author` and `related_posts` represent relationships. Instead, `author` is just a string value and `related_posts` is an array of string values. However, these can be overridden.

In this example, open one of the posts and, from the menu icon in the top-right-corner, choose "Create Template" to create a [frontmatter template](https://forestry.io/docs/settings/front-matter-templates/) based upon the content model.

![create a new frontmatter template](/docs/images/forestry-create-template1.png)

Since this template represents the post type, Name the template "Posts".

![name the frontmatter template](/docs/images/forestry-create-template2.png)

This will generate a frontmatter template as shown below, which can be edited via the UI.

![the generated template](/docs/images/forestry-create-template3.png)

However, this requires some changes that can't be made via the UI, which requires pulling the code down and edit it. Once the code is fetched, the generated file can be found at `.forestry/font_matter/templates/posts.yml`. It has the following contents:

    ---
    label: Posts
    hide_body: false
    fields:
      - type: text
        name: title
        label: title
      - type: datetime
        name: date
        label: date
      - type: text
        name: author
        label: author
      - type: list
        name: related_posts
        label: related_posts

Add a `config` option to each that contains `required: true` to `title`, `date` and `author` since these are required fields. For example, the title will look like this:

    - type: text
      name: title
      label: title
      config:
        required: true

Next, edit the `author` type. Rather than `type: text` this should be [`type: select`](https://forestry.io/docs/settings/fields/select/) so that it will create a drop down of options. Within the `config`, define a `source` of type `pages` that pulls from the `authors` section as shown below:

    - type: select
      name: author
      label: author
      config:
        required: true
        source:
          type: pages
          section: authors

The `related_posts` is already using the [sortable list field type](https://forestry.io/docs/settings/fields/#sortable-list-field), which is what is needed. However, it needs to be configured to use a select-style entry rather than text and to pull that select from the list of posts. The configuration for this looks similar to the code above.

    - type: list
      name: related_posts
      label: related_posts
      config:
        use_select: true
        source:
          type: pages
          section: posts

The last step is to force posts to use this template by modifying the `.forestry/settings.yml` file. Under the section for `posts`, add the `template` setting as follows:

    - type: directory
      path: content/posts
      label: Posts
      create: all
      match: '**/*'
      templates:
        - posts

Once everything is checked back into source control, the dropdowns are working properly.

![editing a post in Forestry](/docs/images/forestry-editing.png)

Notice that existing references to authors and related posts may disappeared or show "Invalid Reference." This is because Forestry adds the full relative path to each related file rather than just the slug. Either edit this manually for each post via the UI or in the code. For example, here's the updated frontmatter for one of my posts:

    title: Han Shot First
    date: 2020-03-31
    author: authors/brian-rinaldi.md
    related_posts:
      - posts/last-jedi-was-good.md
      - posts/return-of-skywalker-awful.md

Did you find this page useful?
------------------------------

Yes

No

Ready to get started?
---------------------

<a href="https://app.stackbit.com/create" class="button primary">Create your Jamstack site</a>

Jump to Section
---------------

<img src="https://www.stackbit.com/images/logo_alt.svg" alt="Stackbit logo" class="home-footer-logo" width="187" height="29" />

-   [Documentation](https://docs.stackbit.com/)
-   [Pricing](https://www.stackbit.com/pricing/)
-   [Site Builder](https://app.stackbit.com/create)
-   [Blog](https://stackbit.com/blog)
-   [About](https://stackbit.com/about)
-   [Contact](https://stackbit.com/contact)

Copyright © 2021 Stackbit. Made with Stackbit

[Terms](https://stackbit.com/tos)[Privacy](https://stackbit.com/privacy)[License](https://stackbit.com/license)

<span class="screen-reader-text">GitHub</span>

<span class="screen-reader-text">Twitter</span>

<img src="https://www.facebook.com/tr?id=2703040533152181&amp;ev=PageView&amp;noscript=1" width="1" height="1" />
