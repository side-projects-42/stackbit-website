This app works best with JavaScript enabled.

<a href="https://www.stackbit.com/" class="site-header-logo-wrapper"><img src="https://www.stackbit.com/images/logo_alt.svg" alt="Stackbit logo" class="site-header-logo" width="187" height="29" /></a><span class="site-header-logo-sep"></span><a href="/docs/" class="site-header-logo-link">Docs</a>

<span class="screen-reader-text">Show Menu</span><span class="site-header-nav-icon" aria-hidden="true"></span>

-   <a href="https://www.stackbit.com/docs/" class="site-header-menu-item-link">Documentation</a>
-   <a href="https://www.stackbit.com/blog/" class="site-header-menu-item-link">Blog</a>
-   <a href="https://www.stackbit.com/pricing/" class="site-header-menu-item-link">Pricing</a>
-   <a href="https://app.stackbit.com/" class="site-header-menu-item-link">Sign In</a>
-   <a href="https://app.stackbit.com/create" class="button-component button-component-theme-accent"><span>Get Started</span></a>

Navigate Docs<span class="icon-angle-right" aria-hidden="true"></span>

-   [Stackbit Docs](/docs/)
    <span class="screen-reader-text">Submenu</span><span class="search-shortcut">⌘K</span>
-   [Getting Started](/docs/getting-started/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [Create a New Site](/docs/getting-started/create-site/)
    -   [Connect Services](/docs/getting-started/connect-services/)
    -   [Live & Shareable Previews](/docs/getting-started/live-previews/)
    -   [GitHub Sync](/docs/getting-started/content-sync/)
    -   [Local Development](/docs/getting-started/edit-code/)
    -   [Drag-and-Drop Components](/docs/getting-started/drag-and-drop/)
    -   [Content Modeling](/docs/getting-started/content-modeling/)
    -   [Publish to Production](/docs/getting-started/production/)
    -   [Continue Your Journey](/docs/getting-started/next-steps/)

-   [Studio Guides](/docs/studio-guides/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [Editing Content](/docs/studio-guides/editing-content/)
    -   [Adding Pages](/docs/studio-guides/adding-pages/)
    -   [Managing SEO](/docs/studio-guides/managing-seo/)
    -   [Publishing](/docs/studio-guides/publishing/)
    -   [Modeling Content](/docs/studio-guides/modeling-content/)
    -   [Sharing and Collaborators](/docs/studio-guides/sharing/)
    -   [Project Settings](/docs/studio-guides/settings/)
    -   [Debugging and Logs](/docs/studio-guides/logs/)

-   [Developer Guides](/docs/developer-guides/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [The Basics](/docs/developer-guides/basics/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Local Development](/docs/developer-guides/basics/local-development/)
        -   [Deploy Your Site](/docs/developer-guides/basics/deploy/)
        -   [Adding a Custom Domain](/docs/developer-guides/basics/custom-domain/)
        -   [Import an Existing Site into Stackbit](/docs/developer-guides/basics/import-your-site/)

    -   [Integrations](/docs/developer-guides/integrations/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Azure](/docs/developer-guides/integrations/azure/)
        -   [DigitalOcean](/docs/developer-guides/integrations/digital-ocean/)
        -   [Netlify](/docs/developer-guides/integrations/netlify/)

    -   [Content Modeling](/docs/developer-guides/content-modeling/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Building Sites with Components](/docs/developer-guides/content-modeling/building-with-components/)
        -   [Tailwind Components](/docs/developer-guides/content-modeling/adding-tailwind-components/)
        -   [Sectioning a Theme](/docs/developer-guides/content-modeling/adding-sections-existing-theme/)

    -   [API-Based CMS](/docs/developer-guides/api-cms/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Ensure Validation on the CMS Side](/docs/developer-guides/api-cms/validation/)
        -   [Code Defensively](/docs/developer-guides/api-cms/code-defensively/)
        -   [Leverage the Existing Ecosystem](/docs/developer-guides/api-cms/leverage-ecosystem/)

    -   [Git-Based CMS](/docs/developer-guides/git-cms/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Understanding Content Relationships](/docs/developer-guides/git-cms/why-relationships-git/)
        -   [Relationships in Netlify CMS](/docs/developer-guides/git-cms/relationships-netlify-cms/)
        -   [Relationships in Forestry](/docs/developer-guides/git-cms/relationships-forestry/)

    -   [Gatsby](/docs/developer-guides/gatsby/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Adding a Favicon](/docs/developer-guides/gatsby/favicon/)
        -   [Adding Analytics](/docs/developer-guides/gatsby/analytics/)
        -   [Adding a Sitemap](/docs/developer-guides/gatsby/sitemap/)
        -   [Adding Site Search](/docs/developer-guides/gatsby/site-search/)

-   [Reference](/docs/reference/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [stackbit.yaml](/docs/reference/stackbit-yaml/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Properties](/docs/reference/stackbit-yaml/properties/)
        -   [Import](/docs/reference/stackbit-yaml/import/)
        -   [Assets](/docs/reference/stackbit-yaml/assets/)
        -   [Logic Fields](/docs/reference/stackbit-yaml/logic-fields/)
        -   [Models](/docs/reference/stackbit-yaml/models/)
        -   [Page models](/docs/reference/stackbit-yaml/page-models/)
        -   [Data models](/docs/reference/stackbit-yaml/data-models/)
        -   [Object models](/docs/reference/stackbit-yaml/object-models/)
        -   [Model Fields](/docs/reference/stackbit-yaml/fields/)
        -   [Examples](/docs/reference/stackbit-yaml/examples/)

    -   [Stackbit CLI](/docs/reference/stackbit-cli/)
    -   [Create Button](/docs/reference/create-button/)
    -   [Example Projects](/docs/reference/examples/)
        <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
        -   [Simple Next.js Example](/docs/reference/examples/simple-nextjs/)

-   [Conceptual Guides](/docs/conceptual-guides/)
    <span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span>
    -   [How Stackbit Works](/docs/conceptual-guides/how-stackbit-works/)
    -   [Site Preview](/docs/conceptual-guides/site-preview/)
    -   [Content Model](/docs/conceptual-guides/content-model/)
    -   [API-based vs. Git-based CMS](/docs/conceptual-guides/api-versus-git-based-cms/)
    -   [File-Based CMS](/docs/conceptual-guides/file-based-cms/)
    -   [API-based CMS](/docs/conceptual-guides/api-based-cms/)
    -   [Site Creation](/docs/conceptual-guides/site-creation/)
    -   [Separating Content from Presentation](/docs/conceptual-guides/content-presentation-separation/)
    -   [Content Slug Best Practices](/docs/conceptual-guides/best-practices-slug/)

![Stackbit](/docs/images/stackbit-crane-sm.png)

Managing Content Relationships in Netlify CMS
=============================================

[Netlify CMS](https://www.netlifycms.org/) is an open source, git-based CMS. It can be deployed to Netlify, but this is not a requirement. Let's look at how to set up an example with posts that have a one-to-one relationship to authors and a one-to-many relationship to related posts. This will focus on defining and managing the relationships rather than the nuts and bolts of getting Netlify CMS up and running.

Netlify CMS defines its content model via a `config.yaml` configuration file placed within the `admin` directory. For this example, we only need two collections: one for the posts and one for the authors. Here are the complete collections from a basic configuration.

    collections:
      - name: post
        label: Posts
        folder: content/posts
        create: true
        slug: '{{slug}}'
        fields:
          - widget: string
            name: title
            label: Title
            required: true
            hint: >-
              The title of the blog post
          - widget: date
            name: date
            label: Date
            required: true
            hint: >-
              The date the post is published
          - widget: string
            name: slug
            label: Slug
            required: true
            hint: >-
              The post URL (do not include folder or file extension)
          - widget: relation
            name: author
            label: Author
            required: true
            hint: >-
              The author of the post
            collection: author
            valueField: slug
            searchFields: ['title']
            displayFields: ['title']
          - widget: relation
            name: related_posts
            label: Related Posts
            required: false
            multiple: true
            hint: >-
              Other related posts
            collection: post
            valueField: slug
            searchFields: ['title']
            displayFields: ['title']
          - widget: markdown
            name: body
            label: Content
            required: true
            hint: Page content
      - name: author
        label: Authors
        folder: content/authors
        create: true
        slug: '{{slug}}'
        fields:
          - widget: string
            name: title
            label: Name
            required: true
            hint: >-
              The name of the author
          - widget: string
            name: slug
            label: Slug
            required: true
            hint: >-
              The post URL (do not include folder or file extension)
          - widget: markdown
            name: body
            label: Content
            required: true
            hint: Author bio

The key pieces of this, from a relationships point of view, are the `author` and `related_posts` fields. These use the [relation widget type](https://www.netlifycms.org/docs/widgets/#relation), which allows users to select a reference to another collection via the CMS user interface. Here's what that looks like - notice the difference between `author`, which is a single value reference, and `related_posts`, which has `multiple: true` thereby allowing multiple reference selections.

![The Netlify CMS relationships UI](/docs/images/netlifycms-ui-sm.png)

As you can see from the image above, the user can search for related items either by pulling the dropdown or by typing and filtering. The multiple select is smart enough to only show options that have not yet been selected. The configuration has different options for the field in the related content that it performs the search on (`searchFields`) and the fields that it displays in the UI (`displayFields`) - both allow for multiple fields to be defined. The example uses just the `title` field for both authors and posts.

So far, that's pretty simple, but the `valueField` leads us into into the trickier part. Netlify CMS does not allow you to select the filename or slug for the `valueField` - it must be a field defined in the frontmatter.

Because of this, we need an additional field named `slug` in both the `post` and `author` content types defined in the `config.yaml`. This is a string containing the posts slug to be used by the SSG but also by Netlify CMS to manage the relationship value placed into the frontmatter. Below is example template for loading the related content (the example uses Hugo):

    <h2>{{ .Title }}</h2>
    {{ $author_page := print "/authors/" .Params.Author }}
    {{ with .Site.GetPage $author_page }}
        <p><em>By {{.Title}}</em></p>
    {{ end }}
    {{.Content}}

    <h4>Related Posts</h4>

    <ul>
    {{ range $postname := .Params.Related_posts }}
        {{ $post_page := print "/posts/" $postname }}
        {{ with $.GetPage $post_page }}
            <li><a href="{{.Permalink}}">{{ .Title }}</a></li>
        {{ end }}
    {{ end }}
    </ul>
    </html>

The issue with this is, as you can imagine, that it is very fragile. First, the code loading the page assumes that the slug and filename match. Since `slug` is just a textfield in the CMS, it is prone to easy typos.

Did you find this page useful?
------------------------------

Yes

No

Ready to get started?
---------------------

<a href="https://app.stackbit.com/create" class="button primary">Create your Jamstack site</a>

Jump to Section
---------------

<img src="https://www.stackbit.com/images/logo_alt.svg" alt="Stackbit logo" class="home-footer-logo" width="187" height="29" />

-   [Documentation](https://docs.stackbit.com/)
-   [Pricing](https://www.stackbit.com/pricing/)
-   [Site Builder](https://app.stackbit.com/create)
-   [Blog](https://stackbit.com/blog)
-   [About](https://stackbit.com/about)
-   [Contact](https://stackbit.com/contact)

Copyright © 2021 Stackbit. Made with Stackbit

[Terms](https://stackbit.com/tos)[Privacy](https://stackbit.com/privacy)[License](https://stackbit.com/license)

<span class="screen-reader-text">GitHub</span>

<span class="screen-reader-text">Twitter</span>

<img src="https://www.facebook.com/tr?id=2703040533152181&amp;ev=PageView&amp;noscript=1" width="1" height="1" />
